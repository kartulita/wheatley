!function(e){"use strict";e.module("utils",[])}(window.angular),function(document){"definitely not using strict!";var libraries={toastr:["//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/js/toastr.min.js","//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/css/toastr.min.css"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"],angular:["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"],"angular-mocks":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-mocks.js"],"angular-touch":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-touch.min.js"],"angular-sanitize":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-sanitize.min.js"],"angular-locale":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_et.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_en-gb.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_ru-ru.min.js"],"angular-route":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-route.min.js"],"angular-ui":["//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.css","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui-ieshiv.min.js","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js"],"angular-moment":["//cdnjs.cloudflare.com/ajax/libs/angular-moment/0.8.2/angular-moment.min.js"],"angular-ui-bootstrap":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap.min.js"],"angular-ui-sortable":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-sortable/0.13.0/sortable.min.js"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"],"jquery-ui":["//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/i18n/jquery-ui-i18n.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/css/jquery-ui.min.css"],"jquery-mobile":["//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.js","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.css","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.theme.min.css"]};[].slice.apply(document.getElementsByTagName("meta")).filter(function(e){return"dependency"===e.getAttribute("name")}).forEach(function(el){var name=el.getAttribute("content");if(!String(name).length)throw new Error("No dependency name specified on <dependency> tag");var files=libraries[name];if(!files)throw new Error("Unknown dependency: "+name);var html="<!-- Dependency: "+name+" -->"+files.map(function(file){var ext=/\.[a-z]+(\?.*)?$/.exec(file);if(0===ext.length)throw new Error('Unknown file type "'+ext+'" in dependency '+name);if(".js"===ext[0]){var xhr=new XMLHttpRequest;if(xhr.open("GET",file,!1),xhr.send(),200!==xhr.status)throw new Error('Failed to load for dependency "'+name+'" script "'+file+'": '+xhr.status);return eval(xhr.responseText),'<script src="'+file+'"></script>'}return".css"===ext[0]?'<link href="'+file+'" rel="stylesheet" type="text/css">':void 0}).join(""),parentEl=el.parentNode,divEl=document.createElement("div");divEl.innerHTML=html,[].slice.apply(divEl.childNodes).forEach(function(e){parentEl.insertBefore(e,el.nextSibling)}),parentEl.removeChild(el)})}(window.document),function(e){"use strict";function n(e){if(!e.toastr)throw new Error("Toastr not found");return e.toastr}function r(e){return{success:function(n){e.success(n,"Success")},error:function(n){e.error(n,"Error")},info:function(n){e.info(n,"Info")},warning:function(n){e.info(n,"Warning")},clear:function(){e.clear()}}}e.module("utils").factory("toastr",n).factory("toastService",r),n.$inject=["$window"],r.$inject=["toastr"]}(window.angular),function(e){"use strict";function n(e,n,r){var t=n.match(e);return t&&t.length>1?_.isUndefined(t[1])?"":t[1]:r}function r(e,n){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%3C/gi,",").replace(/%20/g,n?"%20":"+")}function t(e){return r(e,!0).replace(/%26/g,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function o(e){return _(e).map(function(e,n){if(null===e)e="";else if(e instanceof Date)e=e.toISOString();else if(e.toString==={}.toString)throw new Error("Attempted to pass object as URI query parameter, but object does not implement toString");return r(n)+"="+r(e)}).join("&")}function a(e,n){return e.replace(d,function(e,r){var o=n[r];return null===o||_(o).isUndefined()?"":"/"+t(o)})}function i(e){if(e=_.isNull(e)||_.isUndefined(e)?"":e instanceof Array?_(e).flatten().map(String).filter(function(e){return e.length}).join("/"):String(e),0===e.length)throw new Error('No path specified for endpoint "'+name+'"');return e=e.replace(l,""),e=e.replace(c,"/")}function u(e){var r=e.path,t=e.protocol,o=e.secure,a=n(l,r,null),i=_.isUndefined(t)?null:String(t),u=_.isUndefined(o)?null:o?"https":"http",s=[a,i,u].reduce(function(e,n){return null===e&&null!==n?n:e},null);if(null===s)return s;var c=function(e){return null!==e&&s.toUpperCase()!==e.toUpperCase()};if(c(i)||c(u))throw new Error("Protocols specified in options.path / options.protocol / options.secure are inconsistent: "+[a,i,u].map(function(e){return null===e?"(none)":'"'+e.toUpperCase()+'"'}).join(", "));return s}function s(e,n,r){function t(e,n,r){if(!n)throw new Error("Required parameter missing for Endpoint(name, options)");r&&(n=_({}).defaults(n,{protocol:r.protocol,path:r.path,query:r.query,params:r.params})),"string"==typeof n&&(n={path:n});var t=u(n),a=null===t,s=""===t,l=i(n.path),c=!a&&"HTTPS"===t.toUpperCase(),f="."===l.charAt(0),p="/"===l.charAt(0),m=f||p;if(!a&&m)throw new Error('Domain must be specified if protocol is non-null.  protocol="'+t+'", path="'+l+'"');var h=Object.freeze(_.clone(n.query||{})),j=o(h),g=Object.freeze(_.clone(n.params||{})),b=n.errorHandler?function(e,n){return function(){try{return n.apply(e,arguments)}catch(r){return d.apply(e,arguments)}}}(this,n.errorHandler):d;this.name=e,this.secure=c,this.domainless=m,this.relative=f,this.absolute=p||!this.domainless,this.protocol=t,this.path=l,this.query=h,this.queryString=j,this.params=g,this.baseUrl=(a?"":s?"//":t+"://")+l,this.url=this.baseUrl+(j.length?"?"+j:""),this.parent=r||null,this.invokeCount={any:0,self:0,child:0},this.errorHandler=b,Object.freeze(this)}function s(e,n){var r=this;1===arguments.length&&(n=e,e=r.name);var o=[r.path,n];return new t(e,{path:o},r)}function l(e,n,r){var o=this;2===arguments.length&&(r=n,n=e,e=o.name);var a={};a[n]=r;var i=_({}).extend(o.params,a);return new t(e,{params:i},o)}function c(e,n){var r=this;1===arguments.length&&(n=e,e=r.name);var o=_({}).extend(r.queryObj,n);return new t(e,{query:o},r)}function d(e){var n=this;throw r.error("Failed to communicate with "+n.name+": "+(e?"string"==typeof e?e:e.message:"Unknown error")),e}function f(n,r,t){var o=this;if("string"!=typeof n)throw new Error("Method must be a string");r=r||{};var a=_({}).defaults(r.params,o.params),i=r.query,u=r.body,s=o.toString(_({}).defaults(a,u)),l={method:n,url:s,params:_({}).extend(o.queryObj,i),data:p(n)?u:void 0};return t&&_(l).defaults(t),o.beginInvoke(!0),e(l).catch(o.errorHandler).finally(function(){o.endInvoke(!0)})}function p(e){return/^(PUT|POST|PATCH)$/i.test(e)}function m(e){return function(n,r){return this.invoke(e,n,r)}}function h(e){var n=this,r=n.parent;n.invokeCount.any++,e?n.invokeCount.self++:n.invokeCount.child++,r&&r.beginInvoke(!1)}function j(e){var n=this,r=n.parent;n.invokeCount.any--,e?n.invokeCount.self--:n.invokeCount.child--,r&&r.endInvoke(!1)}function g(e){var n=this;return(e?n.invokeCount.self:n.invokeCount.any)>0}function b(e){var n=this;if(0===arguments.length)return n.url;if(1===arguments.length)return a(n.baseUrl,e);throw new Error("Wrong number of parameters for endpoint.toString([params])")}function w(e,r){function t(){throw new Error("Cannot call constructor directly, use endpoint.defineResource instead")}function o(){return new e}function a(n){return c.get({params:n}).then(function(n){var r=new e(n.data,n);return r.$isNew=!1,r})}function i(r){function t(){return e.preUpdate?constructor.preUpdate(r)||n.when():n.when()}function o(){if(r.$deleted)throw new Error("Attempted to save an itel that has been deleted");var e=_(r).omit(function(e,n){return"$"===n.charAt(0)});return r.$isNew?c.post({body:e}).then(function(e){return r.$isNew=!1,e}):c.put({body:e})}function a(t){return e.postUpdate?e.postUpdate(r,t.data,t)||n.when(r):(_(r).extend(t.data),n.when(r))}if(r.$deleted)throw new Error("Attempted to save an item which has been deleted");return t().then(o).then(a).then(function(){return r})}function u(e){return c.delete({body:e}).then(function(){return e.$deleted=!0,Object.freeze(e)})}function s(){var e=this;return i(e)}function l(){var e=this;return u(e)}var c=this,d={$save:s,$delete:l,$remove:l,$isNew:!0,$deleted:!1};if(r&&_(d).extend(r),d.prototype=e.prototype,e.prototype=d,Object.defineProperty)for(var f in d)Object.defineProperty(e.prototype,f,{enumerable:!1,configurable:!1});var p={constructor:t,endpoint:c,create:o,read:a,update:i,"delete":u,"new":o,load:a,get:a,save:i,remove:u};return _({}).extend(p,r||{})}return t.prototype={constructor:t,extend:s,query:c,param:l,invoke:f,isInvoking:g,beginInvoke:h,endInvoke:j,get:m("GET"),post:m("POST"),put:m("PUT"),"delete":m("DELETE"),head:m("HEAD"),options:m("OPTIONS"),defineResource:w,toString:b,parametrize:b},Object.defineProperty&&(Object.defineProperty(t.prototype,"beginInvoke",{enumerable:!1}),Object.defineProperty(t.prototype,"endInvoke",{enumerable:!1})),t}e.module("utils").factory("Endpoint",s);var l=/^(?:(\w+?):|(?=.))\/\//,c=/\/{2,}/g,d=/(?:\/\:(\w+))(?=\/|$)/g;s.$inject=["$http","$q","toastService"]}(window.angular),function(e){"use strict";e.module("utils").factory("_",["$window",function(e){var n=e._;if(!n)throw new Exception("Underscore not found");return n}])}(window.angular),function(e){"use strict";function n(e){return function(n,r){var t=e(n);return{get:function(){return t(r)},set:function(e){return t.assign(r,e)}}}}e.module("utils").factory("getset",n),n.$inject=["$parse"]}(window.angular),function(e){"use strict";e.module("utils").factory("$",["$window",function(e){var n=e.$;return n?n:function(){throw new Error("Jquery not found")}}])}(window.angular);