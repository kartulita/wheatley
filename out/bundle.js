!function(e){"use strict";e.module("schema",["utils"])}(window.angular),function(e){"use strict";e.module("schema").factory("schemaService",["apiEndpoint",function(e){var n=e.extend("schema service","/schema");return{get:function(e){return n.query({name:e}).get()}}}])}(window.angular),!function(e){"use strict";e.module("fields",["utils","directive-proxy","ui.bootstrap"])}(window.angular),function(e){"use strict";function n(e,n,t){return n.generateDirective("div",function(i,r,o){r.addClass("field-multichoice");var a=e(o.choices)(i),c=t.parse(o.hints,{many:a.length>8,custom:!1,multi:!0});if(c.custom)throw new Error("Conflicting hints on choice field: multi, custom");var l=c.many?"multiselect-fixed-list":"checkbox-group";n("field:"+l,{hints:"copy"},i,r,o)})}e.module("fields").directive("fieldMultichoice",n),n.$inject=["$parse","directiveProxyService","hintParseService"]}(window.angular),function(e){"use strict";function n(e){return{restrict:"E",replace:!0,require:"ngModel",template:'<div class="field-autocomplete"><input class="autocomplete-text-box" type="text" typeahead="choice as choice.title for choice in choices | filter: { title: $viewValue } | limitTo: suggestions" ng-model="model.value" typeahead-on-select="onSelect($item, $model, $label)" typeahead-editable="editable"></div>',scope:{choices:"="},link:function(n,i,r,o){function a(){n.model.value=_(n.choices).findWhere({value:o.$viewValue})}function c(e){e&&o.$setViewValue(e.value),o.$setValidity("validSelection",!!e||l.optional)}var l=e.parse(r.hints,{custom:!1,optional:!1,show:t});n.model={value:null},o.$render=a,n.onSelect=c,a(),n.suggestions=parseInt(l.show),n.editable=l.custom}}}e.module("fields").directive("fieldAutocomplete",n);var t=8;n.$inject=["hintParseService"]}(window.angular),function(e){"use strict";function n(e,n,t){return n.generateDirective("div",function(i,r,o){r.addClass("field-choice");var a=e(o.choices)(i),c=t.parse(o.hints,{many:a.length>8,custom:!1,multi:!1}),l=c.custom?"autocomplete":c.many?"drop-down-list":"radio-group";n("field:"+l,{hints:"copy"},i,r,o)})}e.module("fields").directive("fieldChoice",n),n.$inject=["$parse","directiveProxyService","hintParseService"]}(window.angular),function(e){"use strict";function n(e){return{restrict:"E",replace:!0,require:"ngModel",template:'<div><select class="field-fixed-list" size="{{ size }}" ng-options="choice.value as choice.title for choice in choices" ng-model="model.value" ng-change="onSelect()" multiple></select></div>',scope:{choices:"="},link:function(n,i,r,o){function a(){n.model.value=o.$viewValue}function c(){var e=n.model.value;o.$setViewValue(e),o.$setValidity("validSelection",l.optional||!!e.length)}var l=e.parse(r.hints,{multi:!1,optional:!1});n.model={value:null},o.$render=a,n.onSelect=c,a(),n.size=r.size||t}}}e.module("fields").directive("fieldMultiselectFixedList",n);var t=8;n.$inject=["hintParseService"]}(window.angular),function(e){"use strict";function n(){var e=0;return{restrict:"E",replace:!0,require:"ngModel",template:'<div class="field-radio-group field-choicebox-group"><input type="checkbox" style="display: none;"><label class="radio-item choicebox-item" ng-repeat="choice in choices"><input class="radio-box choicebox-box" type="radio" ng-value="choice.value" ng-attr-name="{{ groupName }}" ng-model="model.value"><span class="radio-label choicebox-label">{{ choice.title }}</span></label></div>',scope:{choices:"=",name:"@"},link:function(n,t,i,r){function o(){n.model.value=r.$viewValue}function a(){r.$setViewValue(n.model.value)}n.model={value:null},r.$render=o,n.$watch("model.value",a),o(),n.groupName="field-radio-group-"+e++}}}e.module("fields").directive("fieldRadioGroup",n)}(window.angular),function(e){"use strict";function n(){function e(e,t){var r=n(e.hints,t);return e.hints=i(r),r}function n(e,n){var t="not ";return _((e||"").toLowerCase().split(",")).chain().map(function(e){e=e.trim();var n=e.substr(0,t.length)===t;return n&&(e=e.substr(t.length)),[e,!n]}).object().defaults(n||{}).value()}function i(e){return _(e).filter(function(e,n){return n.length>0}).map(function(e,n){return(e?"":t)+n}).join(",")}return{process:e,parse:n,stringify:i}}e.module("fields").factory("hintParseService",n);var t="not "}(window.angular),function(e){"use strict";function n(e){return{restrict:"E",replace:!0,require:"ngModel",template:'<div><select class="field-fixed-list" size="{{ size }}" ng-options="choice.value as choice.title for choice in choices" ng-model="model.value" ng-change="onSelect()"></select></div>',scope:{choices:"="},link:function(n,i,r,o){function a(){n.model.value=o.$viewValue}function c(){var e=n.model.value;o.$setViewValue(e),o.$setValidity("validSelection",l.optional||null!==e)}var l=e.parse(r.hints,{multi:!1,optional:!1});console.log(r.hints,l),n.model={value:null},o.$render=a,n.onSelect=c,a(),n.size=r.size||t}}}e.module("fields").directive("fieldFixedList",n);var t=8;n.$inject=["hintParseService"]}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,template:'<select class="field-drop-down-list" ng-options="choice.value as choice.title for choice in choices"></select>',scope:{choices:"="}}}e.module("fields").directive("fieldDropDownList",n)}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,require:"ngModel",template:'<div class="field-checkbox-group field-choicebox-group"><input type="checkbox" style="display: none;"><label class="checkbox-item choicebox-item" ng-repeat="choice in choices" ng-init="index = $index"><input class="checkbox-box choicebox-box" type="checkbox" ng-change="onChange()" ng-model="model.value[index]" ng-true-value="1" ng-false-value="0" ng-checked="1*model.value[index]"><span class="checkbox-label choicebox-label">{{ choice.title }}</span></label></div>',scope:{choices:"="},link:function(e,n,t,i){function r(){var n=i.$viewValue;e.model.value=new Array(e.choices.length);for(var t=0;t<e.choices.length;t++)e.model.value[t]=_(n).contains(e.choices[t].value)}function o(){for(var n=i.$viewValue;n.length;)n.pop();e.model.value.forEach(function(t,i){1*t&&n.push(e.choices[i].value)}),i.$setViewValue(n)}e.model={value:[]},i.$render=r,e.onChange=o,r()}}}e.module("fields").directive("fieldCheckboxGroup",n)}(window.angular),function(e){"use strict";function n(n){return n.generateDirective("label",function(t,i,r){var o=r.purpose,a=r.title;if(i.addClass("field").addClass("field-"+o+"-container").append(e.element("<div/>").addClass("field-label").text(a)),"auto"===o)throw new Error('Field purpose cannot be "auto"');n("field:"+o,["purpose"],t,i,r).addClass("field-"+o)})}e.module("fields").directive("field",n).directive("fieldAuto",n),n.$inject=["directiveProxyService"]}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,template:'<input class="field-text-box" type="text">'}}e.module("fields").directive("fieldTextBox",n)}(window.angular),!function(e){"use strict";e.module("directive-proxy",["utils"])}(window.angular),function(e){"use strict";function n(t,i,r){function o(n,o,a,c,l){var u=n.replace(/[\s\-\:_]+\w/g,function(e){return e.charAt(e.length-1).toUpperCase()})+"Directive";try{i.get(u)}catch(s){throw console.error("Target directive not found or could not be injected: "+n),s}var d=e.element("<"+n+"/>");return o=o?o instanceof Array?r(o).reduce(function(e,n){return e[n]="leave",e},{}):r(o).clone():{},r(o).has("class")||(o["class"]="leave"),r(o).has("id")||(o.id="leave"),r(l).chain().omit(function(e,n){return"$"===n.charAt(0)}).each(function(e,n){var t=r(o).has(n)?o[n]:"move",i=r(l.$attr).has(n)?l.$attr[n]:n;("remove"===t||"move"===t)&&c.removeAttr(i),("copy"===t||"move"===t)&&d.attr(i,e),"="===t.charAt(0)&&d.attr(i,t.substr(1))}),t(d)(a),c.append(d),d}function a(e,n,t){return{restrict:"E",require:t,terminal:!0,priority:1e6,replace:!0,template:"<"+e+"></"+e+">",link:n}}function c(e,t){return n.generateDirective(e,function(e,i,r){n(t,null,e,i,r)})}return o.generateDirective=a,o.generateAlias=c,o}e.module("directive-proxy").factory("directiveProxyService",n),n.$inject=["$compile","$injector","_"]}(window.angular),!function(e){"use strict";e.module("autoform",["utils"])}(window.angular),function(e){"use strict";e.module("autoform").factory("formDecorator",function(){function e(){}return{decorate:e}})}(window.angular),function(e){"use strict";e.module("autoform").factory("autoformService",["schemaService","fieldsetBuilder","formDecorator",function(e,n,t){function i(i,r){return e.get(i).then(function(e){var i=n.build(e),i=t.decorate(i,r);return i})}return{makeAutoform:i}}])}(window.angular),function(e){"use strict";e.module("autoform").factory("fielsetBuilder",["fieldFactory",function(){function e(e){e.title,e.sections.forEach(n)}function n(e){e.title,e.position,e.fields.map(t)}function t(e){e.title,e.type,e.defaultValue}return{build:e}}])}(window.angular),!function(e){"use strict";e.module("api",["utils"])}(window.angular),function(e){"use strict";function n(e,n){return new e("API base",{secure:n.secure,path:[n.domain,n.path]})}e.module("api").factory("api",n),n.$inject=["Endpoint","apiConfig"]}(window.angular),function(e){"use strict";function n(e,n){return $({}).extend(e.common,e[n])}e.module("api").constant("apiConfigs",{common:{secure:!0,path:"/"},dev:{domain:"api.uriel.err.ee"},live:{domain:"api.err.ee"}}).constant("apiMode","dev").factory("apiConfig",n),n.$inject=["apiConfigs","apiMode"]}(window.angular),!function(e){"use strict";e.module("utils",[])}(window.angular),function(document){"definitely not using strict!";var libraries={toastr:["//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/js/toastr.min.js","//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/css/toastr.min.css"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"],angular:["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"],"angular-mocks":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-mocks.js"],"angular-touch":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-touch.min.js"],"angular-sanitize":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-sanitize.min.js"],"angular-locale":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_et.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_en-gb.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_ru-ru.min.js"],"angular-route":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-route.min.js"],"angular-ui":["//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.css","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui-ieshiv.min.js","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js"],"angular-moment":["//cdnjs.cloudflare.com/ajax/libs/angular-moment/0.8.2/angular-moment.min.js"],"angular-ui-bootstrap":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap.min.js"],"angular-ui-sortable":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-sortable/0.13.0/sortable.min.js"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"],"jquery-ui":["//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/i18n/jquery-ui-i18n.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/css/jquery-ui.min.css"],"jquery-mobile":["//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.js","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.css","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.theme.min.css"]};[].slice.apply(document.getElementsByTagName("meta")).filter(function(e){return"dependency"===e.getAttribute("name")}).forEach(function(el){var name=el.getAttribute("content");if(!String(name).length)throw new Error("No dependency name specified on <dependency> tag");var files=libraries[name];if(!files)throw new Error("Unknown dependency: "+name);var html="<!-- Dependency: "+name+" -->"+files.map(function(file){var ext=/\.[a-z]+(\?.*)?$/.exec(file);if(0===ext.length)throw new Error('Unknown file type "'+ext+'" in dependency '+name);if(".js"===ext[0]){var xhr=new XMLHttpRequest;if(xhr.open("GET",file,!1),xhr.send(),200!==xhr.status)throw new Error('Failed to load for dependency "'+name+'" script "'+file+'": '+xhr.status);return eval(xhr.responseText),'<script src="'+file+'"></script>'}return".css"===ext[0]?'<link href="'+file+'" rel="stylesheet" type="text/css">':void 0}).join(""),parentEl=el.parentNode,divEl=document.createElement("div");divEl.innerHTML=html,[].slice.apply(divEl.childNodes).forEach(function(e){parentEl.insertBefore(e,el.nextSibling)}),parentEl.removeChild(el)})}(window.document),function(e){"use strict";function n(e){if(!e.toastr)throw new Error("Toastr not found");return e.toastr}function t(e){return{success:function(n){e.success(n,"Success")},error:function(n){e.error(n,"Error")},info:function(n){e.info(n,"Info")},warning:function(n){e.info(n,"Warning")},clear:function(){e.clear()}}}e.module("utils").factory("toastr",n).factory("toastService",t),n.$inject=["$window"],t.$inject=["toastr"]}(window.angular),function(e){"use strict";function n(e,n,t){var i=n.match(e);return i&&i.length>1?_.isUndefined(i[1])?"":i[1]:t}function t(e,n){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%3C/gi,",").replace(/%20/g,n?"%20":"+")}function i(e){return t(e,!0).replace(/%26/g,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function r(e){return _(e).map(function(e,n){if(null===e)e="";else if(e instanceof Date)e=e.toISOString();else if(e.toString==={}.toString)throw new Error("Attempted to pass object as URI query parameter, but object does not implement toString");return t(n)+"="+t(e)}).join("&")}function o(e,n){return e.replace(d,function(e,t){var r=n[t];return null===r||_(r).isUndefined()?"":"/"+i(r)})}function a(e){if(e=_.isNull(e)||_.isUndefined(e)?"":e instanceof Array?_(e).flatten().map(String).filter(function(e){return e.length}).join("/"):String(e),0===e.length)throw new Error('No path specified for endpoint "'+name+'"');return e=e.replace(u,""),e=e.replace(s,"/")}function c(e){var t=e.path,i=e.protocol,r=e.secure,o=n(u,t,null),a=_.isUndefined(i)?null:String(i),c=_.isUndefined(r)?null:r?"https":"http",l=[o,a,c].reduce(function(e,n){return null===e&&null!==n?n:e},null);if(null===l)return l;var s=function(e){return null!==e&&l.toUpperCase()!==e.toUpperCase()};if(s(a)||s(c))throw new Error("Protocols specified in options.path / options.protocol / options.secure are inconsistent: "+[o,a,c].map(function(e){return null===e?"(none)":'"'+e.toUpperCase()+'"'}).join(", "));return l}function l(e,n,t){function i(e,n,t){if(!n)throw new Error("Required parameter missing for Endpoint(name, options)");t&&(n=_({}).defaults(n,{protocol:t.protocol,path:t.path,query:t.query,params:t.params})),"string"==typeof n&&(n={path:n});var i=c(n),o=null===i,l=""===i,u=a(n.path),s=!o&&"HTTPS"===i.toUpperCase(),f="."===u.charAt(0),p="/"===u.charAt(0),m=f||p;if(!o&&m)throw new Error('Domain must be specified if protocol is non-null.  protocol="'+i+'", path="'+u+'"');var h=Object.freeze(_.clone(n.query||{})),v=r(h),g=Object.freeze(_.clone(n.params||{})),w=n.errorHandler?function(e,n){return function(){try{return n.apply(e,arguments)}catch(t){return d.apply(e,arguments)}}}(this,n.errorHandler):d;this.name=e,this.secure=s,this.domainless=m,this.relative=f,this.absolute=p||!this.domainless,this.protocol=i,this.path=u,this.query=h,this.queryString=v,this.params=g,this.baseUrl=(o?"":l?"//":i+"://")+u,this.url=this.baseUrl+(v.length?"?"+v:""),this.parent=t||null,this.invokeCount={any:0,self:0,child:0},this.errorHandler=w,Object.freeze(this)}function l(e,n){var t=this;1===arguments.length&&(n=e,e=t.name);var r=[t.path,n];return new i(e,{path:r},t)}function u(e,n,t){var r=this;2===arguments.length&&(t=n,n=e,e=r.name);var o={};o[n]=t;var a=_({}).extend(r.params,o);return new i(e,{params:a},r)}function s(e,n){var t=this;1===arguments.length&&(n=e,e=t.name);var r=_({}).extend(t.queryObj,n);return new i(e,{query:r},t)}function d(e){var n=this;throw t.error("Failed to communicate with "+n.name+": "+(e?"string"==typeof e?e:e.message:"Unknown error")),e}function f(n,t,i){var r=this;if("string"!=typeof n)throw new Error("Method must be a string");t=t||{};var o=_({}).defaults(t.params,r.params),a=t.query,c=t.body,l=r.toString(_({}).defaults(o,c)),u={method:n,url:l,params:_({}).extend(r.queryObj,a),data:p(n)?c:void 0};return i&&_(u).defaults(i),r.beginInvoke(!0),e(u).catch(r.errorHandler).finally(function(){r.endInvoke(!0)})}function p(e){return/^(PUT|POST|PATCH)$/i.test(e)}function m(e){return function(n,t){return this.invoke(e,n,t)}}function h(e){var n=this,t=n.parent;n.invokeCount.any++,e?n.invokeCount.self++:n.invokeCount.child++,t&&t.beginInvoke(!1)}function v(e){var n=this,t=n.parent;n.invokeCount.any--,e?n.invokeCount.self--:n.invokeCount.child--,t&&t.endInvoke(!1)}function g(e){var n=this;return(e?n.invokeCount.self:n.invokeCount.any)>0}function w(e){var n=this;if(0===arguments.length)return n.url;if(1===arguments.length)return o(n.baseUrl,e);throw new Error("Wrong number of parameters for endpoint.toString([params])")}function j(e,t){function i(){throw new Error("Cannot call constructor directly, use endpoint.defineResource instead")}function r(){return new e}function o(n){return s.get({params:n}).then(function(n){var t=new e(n.data,n);return t.$isNew=!1,t})}function a(t){function i(){return e.preUpdate?constructor.preUpdate(t)||n.when():n.when()}function r(){if(t.$deleted)throw new Error("Attempted to save an itel that has been deleted");var e=_(t).omit(function(e,n){return"$"===n.charAt(0)});return t.$isNew?s.post({body:e}).then(function(e){return t.$isNew=!1,e}):s.put({body:e})}function o(i){return e.postUpdate?e.postUpdate(t,i.data,i)||n.when(t):(_(t).extend(i.data),n.when(t))}if(t.$deleted)throw new Error("Attempted to save an item which has been deleted");return i().then(r).then(o).then(function(){return t})}function c(e){return s.delete({body:e}).then(function(){return e.$deleted=!0,Object.freeze(e)})}function l(){var e=this;return a(e)}function u(){var e=this;return c(e)}var s=this,d={$save:l,$delete:u,$remove:u,$isNew:!0,$deleted:!1};if(t&&_(d).extend(t),d.prototype=e.prototype,e.prototype=d,Object.defineProperty)for(var f in d)Object.defineProperty(e.prototype,f,{enumerable:!1,configurable:!1});var p={constructor:i,endpoint:s,create:r,read:o,update:a,"delete":c,"new":r,load:o,get:o,save:a,remove:c};return _({}).extend(p,t||{})}return i.prototype={constructor:i,extend:l,query:s,param:u,invoke:f,isInvoking:g,beginInvoke:h,endInvoke:v,get:m("GET"),post:m("POST"),put:m("PUT"),"delete":m("DELETE"),head:m("HEAD"),options:m("OPTIONS"),defineResource:j,toString:w,parametrize:w},Object.defineProperty&&(Object.defineProperty(i.prototype,"beginInvoke",{enumerable:!1}),Object.defineProperty(i.prototype,"endInvoke",{enumerable:!1})),i}e.module("utils").factory("Endpoint",l);var u=/^(?:(\w+?):|(?=.))\/\//,s=/\/{2,}/g,d=/(?:\/\:(\w+))(?=\/|$)/g;l.$inject=["$http","$q","toastService"]}(window.angular),function(e){"use strict";e.module("utils").factory("_",["$window",function(e){var n=e._;if(!n)throw new Exception("Underscore not found");return n}])}(window.angular),function(e){"use strict";function n(e){return function(n,t){var i=e(n);return{get:function(){return i(t)},set:function(e){return i.assign(t,e)}}}}e.module("utils").factory("getset",n),n.$inject=["$parse"]}(window.angular),function(e){"use strict";e.module("utils").factory("$",["$window",function(e){var n=e.$;return n?n:function(){throw new Error("Jquery not found")}}])}(window.angular);