!function(e){"use strict";e.module("schema",["utils"])}(window.angular),function(e){"use strict";e.module("schema").factory("schemaService",["apiEndpoint",function(e){var n=e.extend("schema service","/schema");return{get:function(e){return n.query({name:e}).get()}}}])}(window.angular),!function(e){"use strict";e.module("fields",["utils","directive-proxy","ui.bootstrap"])}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,require:"ngModel",template:'<div class="field-autocomplete"><input class="autocomplete-text-box" type="text" typeahead="choice as choice.title for choice in choices | filter: { title: $viewValue } | limitTo: suggestions" ng-model="model.value" typeahead-on-select="onSelect($item, $model, $label)" typeahead-editable="false"></div>',scope:{choices:"="},link:function(e,n,r,i){e.model={value:null},i.$render=function(){e.model.value=_(e.choices).findWhere({value:i.$viewValue})},e.onSelect=function(e){e&&i.$setViewValue(e.value),i.$setValidity("validSelection",!!e)},e.suggestions=parseInt(r.suggestions)||t,console.log(e)}}}e.module("fields").directive("fieldAutocomplete",n);var t=8;n.$inject=["$parse","hintParseService"]}(window.angular),function(e,n){"use strict";function t(e,t,r){return t.generateDirective("div",function(i,o,a){o.addClass("field-choice");var u=e(a.choices)(i),c=r.parse(a.hints,{many:u.length>6,custom:!1}),l=c.custom?n?"autocomplete":"text-box":c.many?"drop-down-list":"radio-group";t("field:"+l,["hints"],i,o,a)})}e.module("fields").directive("fieldChoice",t),t.$inject=["$parse","directiveProxyService","hintParseService"]}(window.angular,window.hasAngularUI),function(e){"use strict";function n(){var e=0;return{restrict:"E",replace:!0,require:"ngModel",template:'<div class="field-radio-group"><input type="checkbox" style="display: none;"><label class="radio-item" ng-repeat="choice in choices"><input class="radio-box" type="radio" ng-value="choice.value" ng-attr-name="{{ groupName }}" ng-model="model.value"><span class="radio-label">{{ choice.title }}</span></label></div>',scope:{choices:"=",name:"@"},link:function(n,t,r,i){n.model={value:null},i.$render=function(){n.model.value=i.$viewValue},n.$watch("model.value",function(){i.$setViewValue(n.model.value)}),n.groupName="field-radio-group-"+e++}}}e.module("fields").directive("fieldRadioGroup",n)}(window.angular),function(e){"use strict";function n(){function e(e,r){var i=n(e.hints,r);return e.hints=t(i),i}function n(e,n){var t="not ";return _((e||"").toLowerCase().split(",")).chain().map(function(e){e=e.trim();var n=e.substr(0,t.length)===t;return n&&(e=e.substr(t.length)),[e,!n]}).object().defaults(n||{}).value()}function t(e){return _(e).map(function(e,n){return(e?"":notStr)+n}).join(",")}return{process:e,parse:n,stringify:t}}e.module("fields").factory("hintParseService",n)}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,template:'<select class="field-drop-down-list" ng-options="choice.value as choice.title for choice in choices"></select>',scope:{choices:"="}}}e.module("fields").directive("fieldDropDownList",n)}(window.angular),function(e){"use strict";function n(n){return n.generateDirective("label",function(t,r,i){var o=i.purpose;if(i.title,r.addClass("field").addClass("field-"+o+"-container").append(e.element("<div/>").addClass("field-label").text(i.title)),"auto"===o)throw new Error('Field purpose cannot be "auto"');n("field:"+o,["purpose"],t,r,i).addClass("field-"+o)})}e.module("fields").directive("field",n).directive("fieldAuto",n),n.$inject=["directiveProxyService"]}(window.angular),function(e){"use strict";function n(){return{restrict:"E",replace:!0,template:'<input class="field-text-box" type="text">'}}e.module("fields").directive("fieldTextBox",n)}(window.angular),!function(e){"use strict";e.module("directive-proxy",["utils"])}(window.angular),function(e){"use strict";function n(t,r,i){function o(n,o,a,u,c){var l=n.replace(/[\s\-\:_]+\w/g,function(e){return e.charAt(e.length-1).toUpperCase()})+"Directive";try{r.get(l)}catch(s){throw console.error("Target directive not found or could not be injected: "+n),s}var d=e.element("<"+n+"/>");return o=o?o instanceof Array?i(o).reduce(function(e,n){return e[n]="leave",e},{}):i(o).clone():{},i(o).has("class")||(o["class"]="leave"),i(o).has("id")||(o.id="leave"),i(c).chain().omit(function(e,n){return"$"===n.charAt(0)}).each(function(e,n){var t=i(o).has(n)?o[n]:"move";("remove"===t||"move"===t)&&u.removeAttr(c.$attr[n]),("copy"===t||"move"===t)&&d.attr(c.$attr[n],e),"="===t.charAt(0)&&d.attr(c.$attr[n]||n,t.substr(1))}),t(d)(a),u.append(d),d}function a(e,n,t){return{restrict:"E",require:t,terminal:!0,priority:1e6,replace:!0,template:"<"+e+"></"+e+">",link:n}}function u(e,t){return n.generateDirective(e,function(e,r,i){n(t,null,e,r,i)})}return o.generateDirective=a,o.generateAlias=u,o}e.module("directive-proxy").factory("directiveProxyService",n),n.$inject=["$compile","$injector","_"]}(window.angular),!function(e){"use strict";e.module("autoform",["utils"])}(window.angular),function(e){"use strict";e.module("autoform").factory("formDecorator",function(){function e(){}return{decorate:e}})}(window.angular),function(e){"use strict";e.module("autoform").factory("autoformService",["schemaService","fieldsetBuilder","formDecorator",function(e,n,t){function r(r,i){return e.get(r).then(function(e){var r=n.build(e),r=t.decorate(r,i);return r})}return{makeAutoform:r}}])}(window.angular),function(e){"use strict";e.module("autoform").factory("fielsetBuilder",["fieldFactory",function(){function e(e){e.title,e.sections.forEach(n)}function n(e){e.title,e.position,e.fields.map(t)}function t(e){e.title,e.type,e.defaultValue}return{build:e}}])}(window.angular),!function(e){"use strict";e.module("api",["utils"])}(window.angular),function(e){"use strict";function n(e,n){return new e("API base",{secure:n.secure,path:[n.domain,n.path]})}e.module("api").factory("api",n),n.$inject=["Endpoint","apiConfig"]}(window.angular),function(e){"use strict";function n(e,n){return $({}).extend(e.common,e[n])}e.module("api").constant("apiConfigs",{common:{secure:!0,path:"/"},dev:{domain:"api.uriel.err.ee"},live:{domain:"api.err.ee"}}).constant("apiMode","dev").factory("apiConfig",n),n.$inject=["apiConfigs","apiMode"]}(window.angular),!function(e){"use strict";e.module("utils",[])}(window.angular),function(document){"definitely not using strict!";var libraries={toastr:["//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/js/toastr.min.js","//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.2/css/toastr.min.css"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"],angular:["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"],"angular-mocks":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-mocks.js"],"angular-touch":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-touch.min.js"],"angular-sanitize":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-sanitize.min.js"],"angular-locale":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_et.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_en-gb.min.js","//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/i18n/angular-locale_ru-ru.min.js"],"angular-route":["//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-route.min.js"],"angular-ui":["//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.css","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui-ieshiv.min.js","//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js"],"angular-moment":["//cdnjs.cloudflare.com/ajax/libs/angular-moment/0.8.2/angular-moment.min.js"],"angular-ui-bootstrap":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap.min.js"],"angular-ui-sortable":["//cdnjs.cloudflare.com/ajax/libs/angular-ui-sortable/0.13.0/sortable.min.js"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"],"jquery-ui":["//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/i18n/jquery-ui-i18n.min.js","//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/css/jquery-ui.min.css"],"jquery-mobile":["//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.js","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.min.css","//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.1/jquery.mobile.theme.min.css"]};[].slice.apply(document.getElementsByTagName("meta")).filter(function(e){return"dependency"===e.getAttribute("name")}).forEach(function(el){var name=el.getAttribute("content");if(!String(name).length)throw new Error("No dependency name specified on <dependency> tag");var files=libraries[name];if(!files)throw new Error("Unknown dependency: "+name);var html="<!-- Dependency: "+name+" -->"+files.map(function(file){var ext=/\.[a-z]+(\?.*)?$/.exec(file);if(0===ext.length)throw new Error('Unknown file type "'+ext+'" in dependency '+name);if(".js"===ext[0]){var xhr=new XMLHttpRequest;if(xhr.open("GET",file,!1),xhr.send(),200!==xhr.status)throw new Error('Failed to load for dependency "'+name+'" script "'+file+'": '+xhr.status);return eval(xhr.responseText),'<script src="'+file+'"></script>'}return".css"===ext[0]?'<link href="'+file+'" rel="stylesheet" type="text/css">':void 0}).join(""),parentEl=el.parentNode,divEl=document.createElement("div");divEl.innerHTML=html,[].slice.apply(divEl.childNodes).forEach(function(e){parentEl.insertBefore(e,el.nextSibling)}),parentEl.removeChild(el)})}(window.document),function(e){"use strict";function n(e){if(!e.toastr)throw new Error("Toastr not found");return e.toastr}function t(e){return{success:function(n){e.success(n,"Success")},error:function(n){e.error(n,"Error")},info:function(n){e.info(n,"Info")},warning:function(n){e.info(n,"Warning")},clear:function(){e.clear()}}}e.module("utils").factory("toastr",n).factory("toastService",t),n.$inject=["$window"],t.$inject=["toastr"]}(window.angular),function(e){"use strict";function n(e,n,t){var r=n.match(e);return r&&r.length>1?_.isUndefined(r[1])?"":r[1]:t}function t(e,n){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%3C/gi,",").replace(/%20/g,n?"%20":"+")}function r(e){return t(e,!0).replace(/%26/g,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function i(e){return _(e).map(function(e,n){if(null===e)e="";else if(e instanceof Date)e=e.toISOString();else if(e.toString==={}.toString)throw new Error("Attempted to pass object as URI query parameter, but object does not implement toString");return t(n)+"="+t(e)}).join("&")}function o(e,n){return e.replace(d,function(e,t){var i=n[t];return null===i||_(i).isUndefined()?"":"/"+r(i)})}function a(e){if(e=_.isNull(e)||_.isUndefined(e)?"":e instanceof Array?_(e).flatten().map(String).filter(function(e){return e.length}).join("/"):String(e),0===e.length)throw new Error('No path specified for endpoint "'+name+'"');return e=e.replace(l,""),e=e.replace(s,"/")}function u(e){var t=e.path,r=e.protocol,i=e.secure,o=n(l,t,null),a=_.isUndefined(r)?null:String(r),u=_.isUndefined(i)?null:i?"https":"http",c=[o,a,u].reduce(function(e,n){return null===e&&null!==n?n:e},null);if(null===c)return c;var s=function(e){return null!==e&&c.toUpperCase()!==e.toUpperCase()};if(s(a)||s(u))throw new Error("Protocols specified in options.path / options.protocol / options.secure are inconsistent: "+[o,a,u].map(function(e){return null===e?"(none)":'"'+e.toUpperCase()+'"'}).join(", "));return c}function c(e,n,t){function r(e,n,t){if(!n)throw new Error("Required parameter missing for Endpoint(name, options)");t&&(n=_({}).defaults(n,{protocol:t.protocol,path:t.path,query:t.query,params:t.params})),"string"==typeof n&&(n={path:n});var r=u(n),o=null===r,c=""===r,l=a(n.path),s=!o&&"HTTPS"===r.toUpperCase(),f="."===l.charAt(0),p="/"===l.charAt(0),m=f||p;if(!o&&m)throw new Error('Domain must be specified if protocol is non-null.  protocol="'+r+'", path="'+l+'"');var h=Object.freeze(_.clone(n.query||{})),g=i(h),v=Object.freeze(_.clone(n.params||{})),w=n.errorHandler?function(e,n){return function(){try{return n.apply(e,arguments)}catch(t){return d.apply(e,arguments)}}}(this,n.errorHandler):d;this.name=e,this.secure=s,this.domainless=m,this.relative=f,this.absolute=p||!this.domainless,this.protocol=r,this.path=l,this.query=h,this.queryString=g,this.params=v,this.baseUrl=(o?"":c?"//":r+"://")+l,this.url=this.baseUrl+(g.length?"?"+g:""),this.parent=t||null,this.invokeCount={any:0,self:0,child:0},this.errorHandler=w,Object.freeze(this)}function c(e,n){var t=this;1===arguments.length&&(n=e,e=t.name);var i=[t.path,n];return new r(e,{path:i},t)}function l(e,n,t){var i=this;2===arguments.length&&(t=n,n=e,e=i.name);var o={};o[n]=t;var a=_({}).extend(i.params,o);return new r(e,{params:a},i)}function s(e,n){var t=this;1===arguments.length&&(n=e,e=t.name);var i=_({}).extend(t.queryObj,n);return new r(e,{query:i},t)}function d(e){var n=this;throw t.error("Failed to communicate with "+n.name+": "+(e?"string"==typeof e?e:e.message:"Unknown error")),e}function f(n,t,r){var i=this;if("string"!=typeof n)throw new Error("Method must be a string");t=t||{};var o=_({}).defaults(t.params,i.params),a=t.query,u=t.body,c=i.toString(_({}).defaults(o,u)),l={method:n,url:c,params:_({}).extend(i.queryObj,a),data:p(n)?u:void 0};return r&&_(l).defaults(r),i.beginInvoke(!0),e(l).catch(i.errorHandler).finally(function(){i.endInvoke(!0)})}function p(e){return/^(PUT|POST|PATCH)$/i.test(e)}function m(e){return function(n,t){return this.invoke(e,n,t)}}function h(e){var n=this,t=n.parent;n.invokeCount.any++,e?n.invokeCount.self++:n.invokeCount.child++,t&&t.beginInvoke(!1)}function g(e){var n=this,t=n.parent;n.invokeCount.any--,e?n.invokeCount.self--:n.invokeCount.child--,t&&t.endInvoke(!1)}function v(e){var n=this;return(e?n.invokeCount.self:n.invokeCount.any)>0}function w(e){var n=this;if(0===arguments.length)return n.url;if(1===arguments.length)return o(n.baseUrl,e);throw new Error("Wrong number of parameters for endpoint.toString([params])")}function j(e,t){function r(){throw new Error("Cannot call constructor directly, use endpoint.defineResource instead")}function i(){return new e}function o(n){return s.get({params:n}).then(function(n){var t=new e(n.data,n);return t.$isNew=!1,t})}function a(t){function r(){return e.preUpdate?constructor.preUpdate(t)||n.when():n.when()}function i(){if(t.$deleted)throw new Error("Attempted to save an itel that has been deleted");var e=_(t).omit(function(e,n){return"$"===n.charAt(0)});return t.$isNew?s.post({body:e}).then(function(e){return t.$isNew=!1,e}):s.put({body:e})}function o(r){return e.postUpdate?e.postUpdate(t,r.data,r)||n.when(t):(_(t).extend(r.data),n.when(t))}if(t.$deleted)throw new Error("Attempted to save an item which has been deleted");return r().then(i).then(o).then(function(){return t})}function u(e){return s.delete({body:e}).then(function(){return e.$deleted=!0,Object.freeze(e)})}function c(){var e=this;return a(e)}function l(){var e=this;return u(e)}var s=this,d={$save:c,$delete:l,$remove:l,$isNew:!0,$deleted:!1};if(t&&_(d).extend(t),d.prototype=e.prototype,e.prototype=d,Object.defineProperty)for(var f in d)Object.defineProperty(e.prototype,f,{enumerable:!1,configurable:!1});var p={constructor:r,endpoint:s,create:i,read:o,update:a,"delete":u,"new":i,load:o,get:o,save:a,remove:u};return _({}).extend(p,t||{})}return r.prototype={constructor:r,extend:c,query:s,param:l,invoke:f,isInvoking:v,beginInvoke:h,endInvoke:g,get:m("GET"),post:m("POST"),put:m("PUT"),"delete":m("DELETE"),head:m("HEAD"),options:m("OPTIONS"),defineResource:j,toString:w,parametrize:w},Object.defineProperty&&(Object.defineProperty(r.prototype,"beginInvoke",{enumerable:!1}),Object.defineProperty(r.prototype,"endInvoke",{enumerable:!1})),r}e.module("utils").factory("Endpoint",c);var l=/^(?:(\w+?):|(?=.))\/\//,s=/\/{2,}/g,d=/(?:\/\:(\w+))(?=\/|$)/g;c.$inject=["$http","$q","toastService"]}(window.angular),function(e){"use strict";e.module("utils").factory("_",["$window",function(e){var n=e._;if(!n)throw new Exception("Underscore not found");return n}])}(window.angular),function(e){"use strict";function n(e){return function(n,t){var r=e(n);return{get:function(){return r(t)},set:function(e){return r.assign(t,e)}}}}e.module("utils").factory("getset",n),n.$inject=["$parse"]}(window.angular),function(e){"use strict";e.module("utils").factory("$",["$window",function(e){var n=e.$;return n?n:function(){throw new Error("Jquery not found")}}])}(window.angular);